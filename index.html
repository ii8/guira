<!DOCTYPE html>
<html>
  <head>
  <meta charset="UTF-8">
  <title>Try Guira</title>
  <style>
body {
  background-color: #F2A2D9;
}

#container {
  width: 80%;
  margin: auto;
  margin-top: 100px;
}

#examples {
  width: 30%;
  margin-top: 100px;
  float: left;
}

#main {
  width: 70%;
  float: left;
}

h1 {
  text-align: center;
  margin-bottom: 80px;
}

h2 {
  font-family: "Lucida Console", Monaco, monospace;
}

input {
  width: 100%;
  height: 40px;
  background-color: transparent;
  outline: none;
  border: none;
  border-bottom: 2px solid black;
  font-size: 30px;
  font-family: "Lucida Console", Monaco, monospace;
  box-shadow: 0 10px 10px -10px #000;
  margin-bottom: 40px;
  text-align: center;
}

ul {
  list-style-type: none;
  font-family: "Lucida Console", Monaco, monospace;
  padding: 0;
}

#list {
  text-align: center;
}

#elist > li {
  line-height: 170%;
}

#elist > li:hover {
  color: #ffc;
  cursor: pointer;
}
  </style>
  <script>
var w = new Worker("worker.js");

function add_item(i)
{
  var ul = document.getElementById("list");
  var li = document.createElement("li");

  if (i.data == "error") {
    document.getElementById("query").style.color = '#c30';
    return;
  } else {
    document.getElementById("query").style.color = '';
  }

  li.appendChild(document.createTextNode(i.data));
  ul.appendChild(li);
}

function run(selector)
{
  var ul = document.getElementById("list");

  w.terminate();
  w = new Worker("worker.js");
  w.onmessage = add_item;

  while (ul.hasChildNodes()) {
    ul.removeChild(ul.lastChild);
  }

  w.postMessage(selector);
}

function use()
{
  var selector = this.innerHTML;
  document.getElementById("query").value = selector;
  run(selector);
}

function onload()
{
  var l = document.getElementById("elist").childNodes;
  for (var i = 0; i < l.length; i++)
    l[i].onclick = use;
}
  </script>
  </head>
  <body onload="onload()">
    <a href="https://github.com/ii8/guira">
      <img style="position: absolute; top: 0; left: 0; border: 0;" src="https://camo.githubusercontent.com/567c3a48d796e2fc06ea80409cc9dd82bf714434/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f6c6566745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_left_darkblue_121621.png">
    </a>
    <div id=container>
      <h1>グイラ</h1>
      <div id=examples>
        <h2>Examples</h2>
        <ul id=elist>
          <li>(day)</li>
          <li>(day 1)</li>
          <li>(day mon)</li>
          <li>(month jul)</li>
          <li>(month aug (day 1))</li>
          <li>(month 2 (day fri))</li>
          <li>(day (or mon fri sat))</li>
          <li>(day (+ 4 3))</li>
          <li>(year (day (+ 12 7 2)))</li>
          <li>(year leap (month feb))</li>
          <li>(year (eq 3 n) (day 1))</li>
          <li>(day (gt 12 n))</li>
          <li>(month (day (gt n 30)))</li>
          <li>(day (eq (mod n 2) 0))</li>
        </ul>
      </div>
      <div id=main>
        <input id=query type=text oninput="run(this.value)" autofocus>
        <ul id=list>
        </ul>
      </div>
    </div>
  </body>
</html>
